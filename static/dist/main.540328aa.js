var r=(l,t,e)=>new Promise((d,h)=>{var m=a=>{try{o(e.next(a))}catch(n){h(n)}},f=a=>{try{o(e.throw(a))}catch(n){h(n)}},o=a=>a.done?d(a.value):Promise.resolve(a.value).then(m,f);o((e=e.apply(l,t)).next())});import{R as g,j as i,a as s,E as p,b as u}from"./vendor-9fc5ade5.js";const c={title:{text:"Factory Sensor Data"},toolbox:{show:!0,feature:{dataView:{readOnly:!1},restore:{},saveAsImage:{}}},grid:{top:60,left:80,right:60,bottom:45},xAxis:{type:"category",name:"Factory area",nameLocation:"middle",nameTextStyle:{verticalAlign:"middle",fontWeight:"bold"},nameGap:35,bondaryGap:!0,data:["lobby","hallway","office","floor","roof","storage","grounds"]},yAxis:{type:"value",name:"kwh",nameGap:45,nameLocation:"middle",nameTextStyle:{verticalAlign:"middle",fontWeight:"bold"},max:1200,min:300},series:[{data:[820,932,901,934,1290,1233,1320],type:"bar",smooth:!0}],tooltip:{trigger:"axis"}};class b extends g.Component{constructor(t){super(t);this.state={chartData:c,autoRefresh:!0}}refreshOnInterval(){return r(this,null,function*(){setInterval(()=>this.state.autoRefresh?this.refreshOptions():null,500)})}toggleAutoRefresh(){this.setState({autoRefresh:!this.state.autoRefresh})}fetchbackendChartData(){return r(this,null,function*(){return yield window.client.then(t=>t.apis.charts.getSensorData().then(e=>e.obj.data).catch(e=>console.error(e)))})}refreshOptions(){return r(this,null,function*(){let t=JSON.parse(JSON.stringify(c)),e=yield this.fetchbackendChartData();t.series[0].data=e,this.setState({chartData:t})})}componentDidMount(){this.refreshOnInterval()}render(){return i("div",{children:[s(p,{option:this.state.chartData}),i("div",{className:"flex",children:[s("div",{className:"p-4 card bordered",children:s("div",{className:"form-control",children:i("label",{className:"cursor-pointer label",children:[s("span",{className:"label-text mr-2",children:"Show Live Data"}),s("input",{onChange:()=>this.toggleAutoRefresh(),value:this.state.autoRefresh,checked:this.state.autoRefresh,type:"checkbox",className:"toggle toggle-primary toggle-sm"})]})})}),s("div",{className:"btn btn-primary btn-sm mt-5",disabled:this.state.autoRefresh,onClick:()=>this.refreshOptions(),children:"Refresh"})]})]})}}u.render(s(b,{}),document.getElementById("chart-container"));
